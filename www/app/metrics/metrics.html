<!-- ion-nav-bar goes here -->
<ion-view title="Metrics">
    <!-- ion-header-bar goes here -->
    <ion-header-bar align-title="center" class="bar">
        <left-nav-toggle-btn></left-nav-toggle-btn>
        <h1 class="title">Activity Log</h1>
        <div class="buttons">
            <button class="button button-clear icon sprout-icon-notification"></button>
        </div>
    </ion-header-bar>
    <ion-content class="padding has-header">

        <ion-slide-box id="PeriodSlider" show-pager="false" >

            <ion-slide class="list item" ng-repeat="filter in timePeriodFilters">
                <div class="row">
                    <div class="col col-30 filter" style="text-align: left"
                    ng-class="{selected : (($index-1) == filterIndex)}" 
                    ng-click="applyFilter($index -1)">
                        {{timePeriodFilters[$index - 1].displayName}} 
                    </div>
                    <div class="col col-40 filter" style="text-align: center" 
                    ng-class="{selected : ($index == filterIndex)}" 
                    ng-click="applyFilter($index)">
                        {{$index > 0 ? '|' : ''}} {{filter.displayName}} {{$index < timePeriodFilters.length ? '|' : ''}}
                    </div>
                    <div class="col col-30 filter" style="text-align: right" 
                    ng-class="{selected : ($index+1 == filterIndex)}" 
                    ng-click="applyFilter($index + 1)">
                       {{timePeriodFilters[$index + 1].displayName}}
                    </div>
                </div>
            </ion-slide>
          </ion-slide-box>



        <!--User profile and main scoreboard-->
        <div class="list">

            <div class="item item-thumbnail-left item-icon-right border-none" href="#">
                <img ng-src="{{user.avatarUrl}}">

                <h2>{{user.firstName + ' ' + user.lastName}}</h2>

                <p>{{user.department + ' ' + user.location}}</p>
                <i class="icon">
                    <h2>{{visibleSproutScore}}</h2>
                </i>
            </div>
        </div>


        <!--Activity log-->
      <h3>Activity Log</h3>
        
      <div class="list">
        <div ng-repeat="activity in groupedActivities" class="card">
          <div ng-if="$index == 0 || insertNewDateGrouping($index)">
            {{ generateDisplayDate(activity.date) }}
          </div>          

          <div class="item">
            <div class="activity-name">{{activity.activityDisplayName}}

              <div class="item-note text-center" style="text-align:right">
                <div class="minutes">{{activity.quantity}} {{activity.activityUnitDisplayName}}</div>
                <div>{{activity.points}} points</div>
              </div>
            </div>
          </div>
        </div>

        <ion-infinite-scroll on-infinite="performInfiniteScroll()" icon="ion-loading-c" distance="1%"></ion-infinite-scroll>
    </ion-content>
</ion-view>