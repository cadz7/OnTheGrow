<!-- ion-nav-bar goes here -->
<ion-view title="Leaderboards">
    <!-- ion-header-bar -->

<div id="stream-header">
    <ion-header-bar align-title="center" class="bar">
        <!-- Hamburger Button -->

        <left-nav-toggle-btn ng-hide="editFilters"></left-nav-toggle-btn>
            <button class="button button-icon icon sprout-icon-close" ng-show="editFilters" ng-click="toggleFiltersView()"></button>
        <h1 class="title" ng-show="!editFilters" ng-click="toggleLeaderBoardFilters()">{{selectedLeaderBoardFilter.displayName}}</h1>
        <h1 class="title" ng-show="editFilters">FILTER EDIT</h1>
        <span class="icon ion-chevron-down filter-chevron"  ng-class="{'ion-chevron-down':!showLeaderBoardFilters,'ion-chevron-up':showLeaderBoardFilters }"></span>

      <div class="buttons">
        <button class="button button-clear icon button-calm" ng-show="editFilters" ng-click="toggleFiltersView()">DONE</button>
        <button class="button button-clear icon sprout-icon-notification" ng-hide="editFilters"></button>
      </div>
<!-- Filter dropdown -->
        <div class="row stream-item-filter" ng-show="showLeaderBoardFilters">
                <div class="leadboardFilterRow row" ng-repeat="filter in leaderBoardFilters" 
                ng-class="{selected : (filter.filterId == selectedLeaderBoardFilter.filterId)}">
<!-- if there are subfilters -->
                   <h5 ng-if="filter.subFilters.length == 0" class="col" ng-click="selectLeaderBoardFilter(filter)"> {{filter.displayName}} </h5>
<!-- if there are no filters -->
                   <h5 ng-if="filter.subFilters.length > 0" class="col" ng-click="showSubLeadboardFilters(filter)"> {{filter.displayName}} </h5>
<!-- select icon -->
                   <i ng-if="filter.filterId == selectedLeaderBoardFilter.filterId" class="icon ion-checkmark-circled calm"></i> 
<!-- chevron icon -->
                  <i ng-if="filter.subFilters" class="icon sprout-icon-forward"></i> 
                </div>
            </div>
        </div>
    </ion-header-bar>
    <ion-content id="LeaderboardContent" class="text-center padding has-header">

        <div id="leaderBoards" ng-hide="editFilters">

            <div class="has-footer" id="ActivityDurationFilter" ng-click="toggleFiltersView()">
                {{selectedCategory.displayName}} | {{activePeriod.displayName}}
                <i class="icon ion-edit"></i>
            </div>
            <h3 class="rankingTitle">{{currentBoardTitle}}</h3>
            <ion-slide-box id="LeaderboardList" on-slide-changed="switchBoard(index)">
                <ion-slide ng-repeat="board in leaderBoards">
                    <div leader="leaderData" ng-repeat="leaderData in board.items | orderBy:'rank'" class="list card leader row" ng-class="{topThree : ($index < 3)}">
                    </div>
                </ion-slide>
            </ion-slide-box>
        </div>

        <div id="FilterView" ng-hide="!editFilters">

            <div class="list">
                <div class="item" ng-click="toggleActivityList()">
                    {{ selectedCategory.displayName || 'Choose Activity' }}
                    <i class="icon ion-ios7-arrow-down"></i>

                </div>
                <label class="item item-input">
                    <input type="text" ng-model="activitySearchText.displayName" placeholder="e.g. - Cardio, Housework, Veggies...">
                    <i class="icon ion-ios7-search placeholder-icon"></i>
                </label>
                <a href="" class="item" ng-click="selectActivityFilter(activity)" ng-show="activityView || activitySearchText.displayName" ng-repeat="activity in (selectedCategory.subFilters.length > 0) ? selectedCategory.subFilters : activityFilters | filter:activitySearchText">{{activity.displayName}}</a>
            </div>
            <h3>Duration</h3>
            <ion-slide-box id="PeriodSlider" delegate-handle="PeriodSlider" show-pager="false" on-slide-changed="getPeriod(index)">
                <ion-slide class="list item" ng-repeat="period in periods">
                    <div class="row">
                        <div class="col col-30 filter left" style="text-align: left">
                            {{periods[$index - 1].displayName}}
                        </div>
                        <div class="col col-40 filter selected" style="text-align: center">
                            {{$index > 0 ? '' : ''}} {{period.displayName}} {{$index
                            < timePeriodFilters.length ? '' : ''}} </div>
                                <div class="col col-30 filter right" style="text-align: right">
                                    {{periods[$index + 1].displayName}}
                                </div>
                        </div>
                </ion-slide>
            </ion-slide-box>

            </div>

    </ion-content>

</ion-view>